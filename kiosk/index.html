<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kiosk de Ponto</title>
  <link rel="stylesheet" href="./styles.css" />
  <script src="https://unpkg.com/html5-qrcode@2.3.11/minified/html5-qrcode.min.js"></script>
</head>
<body>
  <div class="page">
    <header class="top">
      <div>
        <div class="title">Kiosk de Ponto</div>
        <div class="subtitle">Bater entrada e saída com QR ou seleção manual</div>
      </div>
      <div class="badge" id="status-badge">Offline</div>
    </header>

    <section class="card">
      <div class="card-header">Configuração rápida</div>
      <div class="grid">
        <label class="field">
          <span>API Base (ex: https://sua-api/v1)</span>
          <input id="api-base" placeholder="https://.../v1" />
        </label>
        <label class="field">
          <span>Token JWT (role hr/owner)</span>
          <input id="api-token" type="password" placeholder="cole o token" />
        </label>
        <label class="field">
          <span>Auto clock ao ler QR</span>
          <select id="auto-action">
            <option value="none">Não automatizar</option>
            <option value="in">Clock-in</option>
            <option value="out">Clock-out</option>
          </select>
        </label>
        <div class="actions">
          <button id="save-settings">Salvar & Carregar colaboradores</button>
          <button id="refresh-employees" class="ghost">Recarregar</button>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="card-header">Selecionar colaborador</div>
      <div class="grid">
        <label class="field">
          <span>Colaborador</span>
          <select id="employee-select"></select>
        </label>
        <label class="field">
          <span>Timestamp (opcional)</span>
          <input id="timestamp" type="datetime-local" />
        </label>
        <label class="field">
          <span>Observação</span>
          <input id="note" placeholder="opcional" />
        </label>
        <div class="actions">
          <button id="clock-in" class="primary">Bater entrada</button>
          <button id="clock-out" class="ghost">Bater saída</button>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="card-header row">
        <div>Leitor de QR</div>
        <div class="small-text">Forme o QR com apenas o ID do colaborador (número) ou JSON {"employee_id":X}</div>
      </div>
      <div class="qr-row">
        <div id="reader"></div>
        <div class="qr-log">
          <div id="scan-status">Aguardando câmera...</div>
          <button id="toggle-scan" class="ghost">Iniciar câmera</button>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="card-header">Últimas batidas</div>
      <div id="entries" class="list"></div>
    </section>
  </div>

  <div id="toast" class="toast hidden"></div>

  <script type="module" src="./app.js"></script>
</body>
</html>
